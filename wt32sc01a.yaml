substitutions:
  name: wt32sc01a
  id_prefix: "wt32sc01a"
  friendly_name: 'WT32-SC01 3.5"'
  comment: WT32-SC01 3.5"
  board: esp-wrover-kit

packages:
  common: !include packages/common-32-api.yaml

esphome:
  on_boot:
    - delay: 5s
    - lvgl.widget.hide: boot_screen

esp32:
  flash_size: 16MB
#  framework:
#    sdkconfig_options:
#      CONFIG_ESPTOOLPY_FLASHSIZE_4MB: y

preferences:
  flash_write_interval: 15min

api:
  # ...
  on_client_connected:
    - lvgl.widget.show: lbl_hastatus
    - logger.log:
        format: "Client %s connected to API with IP %s"
        args: ["client_info.c_str()", "client_address.c_str()"]
  on_client_disconnected:
    - lvgl.widget.hide: lbl_hastatus
    - logger.log: "API client disconnected!"

psram:
  mode: quad
  speed: 80MHz

output:
  - platform: ledc
    pin: GPIO23
    id: gpio_23_backlight_pwm

light:
  - platform: monochromatic
    output: gpio_23_backlight_pwm
    name: "${friendly_name} backlight"
    id: ${id_prefix}_backlight
    restore_mode: ALWAYS_ON

i2c:
  id: i2c_bus_intern
  sda: 18
  scl: 19
  scan: false

touchscreen:
  - platform: ft63x6
    id: ${id_prefix}_touch
    i2c_id: i2c_bus_intern
    interrupt_pin: GPIO39

spi:
  clk_pin: GPIO14
  mosi_pin: GPIO13
  miso_pin: GPIO12

image:
  - file: https://esphome.io/favicon-512x512.png
    id: boot_logo
    resize: 200x200
    type: RGB565
#    transparency: alpha_channel

font:
  - file: "fonts/materialdesignicons-webfont.ttf"
    id: mdi_42
    size: 42
    bpp: 4
    glyphs: [
      "\U000F0335", # mdi-lightbulb
      "\U000F0336", # mdi-lightbulb-outline
      ]

display:
  - platform: ili9xxx
    id: ${id_prefix}_display
    model: ST7796
    cs_pin: GPIO15
    dc_pin: GPIO21
    reset_pin: GPIO22
#    rotation: 270
    invert_colors: false
    auto_clear_enabled: False
    update_interval: never
      
lvgl:
  displays:
    - ${id_prefix}_display
  touchscreens:
    - ${id_prefix}_touch
  theme:
    button:
      bg_color: 0x2F8CD8
      bg_grad_color: 0x005782
      bg_grad_dir: VER
      bg_opa: COVER
      border_color: 0x0077b3
      border_width: 1
      text_color: 0xFFFFFF
      pressed: # set some button colors to be different in pressed state
        bg_color: 0x006699
        bg_grad_color: 0x00334d
      checked: # set some button colors to be different in checked state
        bg_color: 0x1d5f96
        bg_grad_color: 0x03324A
        text_color: 0xfff300
    buttonmatrix:
      bg_opa: TRANSP
      border_color: 0x0077b3
      border_width: 0
      text_color: 0xFFFFFF
      pad_all: 0
      items: # set all your buttonmatrix buttons to use your custom defined styles and font
        bg_color: 0x2F8CD8
        bg_grad_color: 0x005782
        bg_grad_dir: VER
        bg_opa: COVER
        border_color: 0x0077b3
        border_width: 1
        text_color: 0xFFFFFF
        pressed:
          bg_color: 0x006699
          bg_grad_color: 0x00334d
        checked:
          bg_color: 0x1d5f96
          bg_grad_color: 0x03324A
          text_color: 0x005580
#    switch:
#      bg_color: 0xC0C0C0
#      bg_grad_color: 0xb0b0b0
#      bg_grad_dir: VER
#      bg_opa: COVER
#      checked:
#        bg_color: 0x1d5f96
#        bg_grad_color: 0x03324A
#        bg_grad_dir: VER
#        bg_opa: COVER
#      knob:
#        bg_color: 0xFFFFFF
#        bg_grad_color: 0xC0C0C0
#        bg_grad_dir: VER
#        bg_opa: COVER
#    slider:
#      border_width: 1
#      border_opa: 15%
#      bg_color: 0xcccaca
#      bg_opa: 15%
#      indicator:
#        bg_color: 0x1d5f96
#        bg_grad_color: 0x03324A
#        bg_grad_dir: VER
#        bg_opa: COVER
#      knob:
#        bg_color: 0x2F8CD8
#        bg_grad_color: 0x005782
#        bg_grad_dir: VER
#        bg_opa: COVER
#        border_color: 0x0077b3
#        border_width: 1
#        text_color: 0xFFFFFF
  style_definitions:
    - id: header_footer
      bg_color: 0x2F8CD8
      bg_grad_color: 0x0000FF
      bg_grad_dir: VER
      bg_opa: COVER
      border_opa: TRANSP
      radius: 0
      pad_all: 0
      pad_row: 0
      pad_column: 0
      border_color: 0x0077b3
      text_color: 0xFFFFFF
      width: 100%
      height: 30
  top_layer:
    widgets:
      - label:
          text: "\uF1EB"
          id: lbl_hastatus
          align: top_right
          x: -2
          y: 7
          text_align: right
          text_color: 0xFFFFFF
          hidden: true
      - buttonmatrix:
          align: bottom_mid
          styles: header_footer
          pad_all: 0
          outline_width: 0
          id: top_layer
          items:
            styles: header_footer
          rows:
            - buttons:
              - id: page_prev
                text: "\uF053"
                on_press:
                  then:
                    lvgl.page.previous:
              - id: page_home
                text: "\uF015"
                on_press:
                  then:
                    lvgl.page.show: main_page
              - id: page_next
                text: "\uF054"
                on_press:
                  then:
                    lvgl.page.next:
      - obj:
          id: boot_screen
          x: 0
          y: 0
          width: 100%
          height: 100%
          bg_color: 0xffffff
          bg_opa: COVER
          radius: 0
          pad_all: 0
          border_width: 0
          widgets:
            - image:
                align: CENTER
                src: boot_logo
                y: -40
            - spinner:
                align: CENTER
                y: 95
                height: 50
                width: 50
                spin_time: 1s
                arc_length: 60deg
                arc_width: 8
                indicator:
                  arc_color: 0x18bcf2
                  arc_width: 8
          on_press:
            - lvgl.widget.hide: boot_screen
  pages:
    - id: main_page
      widgets:
        - obj:
            align: TOP_MID
            styles: header_footer
            widgets:
              - label:
                  text: "ESPHome LVGL Display"
                  align: CENTER
                  text_align: CENTER
                  text_color: 0xFFFFFF
        - button:
            x: 110
            y: 40
            width: 90
            height: 50
            checkable: true
            state:
              checked: false
              disabled: false
            id: btn_lightbulb
            widgets:
              - label:
                  id: lbl_lightbulb
                  align: CENTER
                  text_font: mdi_42
                  text: "\U000F0336" # mdi-lightbulb-outline
            on_short_click:
              - homeassistant.action:
                  action: light.toggle
                  data:
                    entity_id: light.remote_light
    - id: page2
      widgets:
        - obj:
            align: TOP_MID
            styles: header_footer
            widgets:
              - label:
                  text: "A second page"
                  align: CENTER
                  text_align: CENTER
                  text_color: 0xFFFFFF
        - label:
            align: CENTER
            text: 'Hello World!'
        - obj: # clock container
            height: SIZE_CONTENT
            width: 240
            align: CENTER
            pad_all: 0
            border_width: 0
            bg_color: 0xFFFFFF
            widgets:
              - meter: # clock face
                  height: 220
                  width: 220
                  align: CENTER
                  bg_opa: TRANSP
                  border_width: 0
                  text_color: 0x000000
                  scales:
                    - range_from: 0 # minutes scale
                      range_to: 60
                      angle_range: 360
                      rotation: 270
                      ticks:
                        width: 1
                        count: 61
                        length: 10
                        color: 0x000000
                      indicators:
                        - line:
                            id: minute_hand
                            width: 3
                            color: 0xa6a6a6
                            r_mod: -4
                            value: 0
                    - range_from: 1 # hours scale for labels
                      range_to: 12
                      angle_range: 330
                      rotation: 300
                      ticks:
                        width: 1
                        count: 12
                        length: 1
                        major:
                          stride: 1
                          width: 4
                          length: 10
                          color: 0xC0C0C0
                          label_gap: 12
                    - range_from: 0 # hi-res hours scale for hand
                      range_to: 720
                      angle_range: 360
                      rotation: 270
                      ticks:
                        count: 0
                      indicators:
                        - line:
                            id: hour_hand
                            width: 5
                            color: 0xa6a6a6
                            r_mod: -30
                            value: 0
              - label:
                  #styles: date_style
                  id: day_label
                  y: -30
              - label:
                  id: date_label
                  #styles: date_style
                  y: 30
    - id: meter_page
      widgets:
        - obj:
            align: TOP_MID
            styles: header_footer
            widgets:
              - label:
                  text: "Outdoor temperature"
                  align: CENTER
                  text_align: CENTER
                  text_color: 0xFFFFFF
        - meter:
            align: CENTER
            height: 180
            width: 180
            scales:
              - range_from: -200 # scale for the needle value
                range_to: 300
                angle_range: 240
                rotation: 150
                indicators:
                  - line:
                      id: temperature_needle
                      width: 2
                      color: 0xFF0000
                      r_mod: -4
                      value: 32
              - range_from: -20 # scale for the value labels
                range_to: 30
                angle_range: 240
                rotation: 150
                ticks:
                  width: 1
                  count: 51
                  length: 10
                  color: 0x000000
                  major:
                    stride: 5
                    width: 2
                    length: 10
                    color: 0x404040
                    label_gap: 10
            widgets:
              - label:
                  id: temperature_text
                  text: "3.2°C"
                  align: CENTER
                  y: 45
              - label:
                  text: "Outdoor"
                  align: CENTER
                  y: 65